(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-128aa79d"],{"08cd":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-page"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"d-flex align-start",attrs:{cols:"12"}},[a("v-icon",{attrs:{large:"",color:"#6F6F6F"},on:{click:function(e){return t.$emit("onBack")}}},[t._v("keyboard_arrow_left")]),a("span",{staticClass:"ml-2"},[a("h2",{staticClass:"grey--text text--darken-1",domProps:{innerHTML:t._s(t.header)}})]),a("v-spacer"),t.receive?a("v-btn",{staticClass:"text-center white--text",attrs:{rounded:"",large:"",color:"black"},on:{click:function(e){return t.$emit("receive")}}},[a("v-row",[a("v-col",[a("div",{staticClass:"font-weight-bold",staticStyle:{"font-size":"14px"}},[t._v("รับเหรียญ")])]),a("v-col",{staticClass:"pa-0 pt-3 pb-3"},[a("v-img",{attrs:{src:n("9e28"),width:"23px",height:"20px"}})],1)],1)],1):t._e()],1),a("v-col",{staticClass:"mt-5 px-3",attrs:{cols:"12"}},[a("v-row",{attrs:{"no-gutters":"",justify:"center"}},[t._t("content")],2)],1)],1)],1)},r=[],s={name:"Layout",props:{header:{type:String,default:""},receive:{type:Boolean,default:!1}}},o=s,i=(n("4bbb"),n("2877")),c=n("6544"),u=n.n(c),l=n("8336"),d=n("62ad"),m=n("132d"),p=n("adda"),v=n("0fd9"),f=n("2fa4"),h=Object(i["a"])(o,a,r,!1,null,null,null);e["a"]=h.exports;u()(h,{VBtn:l["a"],VCol:d["a"],VIcon:m["a"],VImg:p["a"],VRow:v["a"],VSpacer:f["a"]})},"0d10":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"payment-page"},[n("div",{staticClass:"text-center mt-10"},[t._v(" Comming Soon.. ")]),n("bottom-nav")],1)},r=[],s=n("b85c"),o=n("1da1"),i=(n("96cf"),n("c740"),n("99af"),n("08cd")),c=n("c549"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{staticClass:"history-pay-tem",attrs:{"no-gutters":"",align:"center"}},[n("v-col",{attrs:{cols:"1"}},[n("div",{staticClass:"icon-shuff"},[n("v-img",{attrs:{src:t.token.logoURI,width:"100%","max-width":"36px",height:"auto",contain:""}})],1)]),n("v-col",{staticClass:"detail-body",attrs:{cols:"8"}},[n("div",[t._v(t._s(t.Description))]),n("div",[t._v("จำนวน "+t._s(t.formatMoney(String(t.Amount).substring(0,String(t.Amount).length-2)))+" บาท")]),n("div",[t._v(" Tx ID: "+t._s(t.TransactionId)+" ")])]),n("v-col",{staticClass:"text-right",staticStyle:{"font-size":"12px"},attrs:{cols:"3"}},[0==t.PaymentStatus?n("span",{staticClass:"success--text"},[t._v("Success")]):1==t.PaymentStatus?n("span",{staticClass:"error--text"},[t._v("Fail")]):2==t.PaymentStatus?n("span",{staticClass:"error--text"},[t._v("Cancel")]):3==t.PaymentStatus?n("span",{staticClass:"error--text"},[t._v("Error")]):4==t.PaymentStatus?n("span",[t._v("Transaction Timeout")]):9==t.PaymentStatus?n("span",[t._v("Transaction Pending")]):20==t.PaymentStatus?n("span",[t._v("Void Success")]):21==t.PaymentStatus?n("span",[t._v("Refund Success")]):22==t.PaymentStatus?n("span",[t._v("Request to Refund")]):23==t.PaymentStatus?n("span",[t._v("Settlement Success")]):24==t.PaymentStatus?n("span",[t._v("Void Fail Refund")]):25==t.PaymentStatus?n("span",[t._v("Fail Pending")]):99==t.PaymentStatus?n("span",{staticClass:"warning--text"},[t._v("Pending")]):t._e()]),t.lastChild?t._e():n("v-col",{staticClass:"pt-2 px-2",attrs:{cols:"12"}},[n("v-divider")],1)],1)},l=[],d=(n("a9e3"),n("7db0"),{name:"HistoryPayItem",computed:{tokenList:function(){return this.$store.state.auth.tokenList}},props:{Description:{type:String,default:"-"},TransactionId:{type:String,default:""},tokenAddress:{type:String,default:""},PaymentStatus:{type:Number,default:99},Amount:{type:Number,default:0},lastChild:{type:Boolean,default:!1}},data:function(){return{token:null}},created:function(){var t=this,e=this.tokenList.find((function(e){return String(e.address).toLowerCase()==String(t.tokenAddress).toLowerCase()}));this.token=e}}),m=d,p=(n("c478"),n("2877")),v=n("6544"),f=n.n(v),h=n("62ad"),g=n("ce7e"),y=n("adda"),b=n("0fd9"),_=Object(p["a"])(m,u,l,!1,null,null,null),C=_.exports;f()(_,{VCol:h["a"],VDivider:g["a"],VImg:y["a"],VRow:b["a"]});var k=n("4ee7"),x={name:"Payment",components:{layout:i["a"],"bottom-nav":c["a"],"history-pay-item":C},computed:{sum_price:function(){try{return this.amount*this.selected.price}catch(t){return 0}},tokenList:function(){return this.$store.state.auth.tokenList},tokenListWithoutSelect:function(){var t=this;try{var e=this.tokenList.findIndex((function(e){return e==t.selected}));if(e>=0){var n=[];for(var a in this.tokenList)a!=e&&n.push(this.tokenList[a]);return n}return this.tokenList}catch(r){return console.log(r),this.tokenList}},me:function(){return this.$store.state.auth.me}},data:function(){return{panel:null,phoneRules:[function(t){return!!t||"กรุณากรอกเบอร์โทรศํพท์"},function(t){return t&&t.length<=10||"เบอร์โทรศัพท์ 10 หลัก"}],valid:!0,amount:0,selected:null,form:{CustomerId:null,Amount:null,PhoneNumber:null,Description:null,ChannelCode:null,ProductImageUrl:null},history:[]}},created:function(){this.selected=this.tokenList[0]},mounted:function(){var t=this;this.$nextTick(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getHistory();case 2:case"end":return e.stop()}}),e)}))))},methods:{getHistory:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k["b"].where("CustomerId","==",String(t.me.uid)).orderBy("OrderNo","desc").limit(20).get();case 2:if(n=e.sent,!n.empty){a=[],r=Object(s["a"])(n.docs);try{for(r.s();!(o=r.n()).done;)i=o.value,a.push(i.data())}catch(c){r.e(c)}finally{r.f()}t.history=a}case 4:case"end":return e.stop()}}),e)})))()},channelPayment:function(t){this.form.ChannelCode=t},pay:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.app_loading(!0),e.prev=1,t.form.Amount=t.sum_price+"00",t.form.Description="ซื้อเหรียญ ".concat(t.selected.symbol," จำนวน ").concat(t.amount," เหรียญ"),t.form.ProductImageUrl=t.selected.logoURI,"payplus_kbank"==t.form.ChannelCode||"bank_qrcode"==t.form.ChannelCode&&delete t.form.PhoneNumber,t.form.CustomerId=t.me.uid,n={ethereumAddress:t.ethereumAddress,tokenAddress:t.selected.address,tokenAmount:t.amount,form:t.form},e.next=10,t.$axios.post("https://asia-southeast1-mpv-wallet.cloudfunctions.net/mpv/api/payment/create",n);case 10:a=e.sent,t.app_loading(!1),r=a.data.data.PaymentUrl,t.alert_show({type:"success",header:"การทำรายการสำเร็จ",title:"กรุณาชำระเงิน <br/> ระบบจะทำการส่งเหรียญให้ท่าน"}).then((function(){for(var e in t.panel=null,t.amount=0,t.form)t.form[e]=null})),window.open(r,"_blank"),t.getHistory(),e.next=23;break;case 18:e.prev=18,e.t0=e["catch"](1),console.log(e.t0),t.app_loading(!1),t.alert_show({type:"error",title:"การทำรายการล้มเหลว <br/> กรุณาลองใหม่อีกครั้ง"});case 23:case"end":return e.stop()}}),e,null,[[1,18]])})))()},saveToFB:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k["b"].add(t);case 2:case"end":return e.stop()}}),e)})))()}}},w=x,S=(n("259a"),Object(p["a"])(w,a,r,!1,null,null,null));e["default"]=S.exports},"20f6":function(t,e,n){},"259a":function(t,e,n){"use strict";n("d891")},"262c":function(t,e,n){},"2fa4":function(t,e,n){"use strict";n("20f6");var a=n("80d2");e["a"]=Object(a["g"])("spacer","div","v-spacer")},"4bbb":function(t,e,n){"use strict";n("955a")},"5d59":function(t,e,n){},"8ce9":function(t,e,n){},"955a":function(t,e,n){},"9b63":function(t,e,n){"use strict";n("5d59")},"9e28":function(t,e,n){t.exports=n.p+"img/buyicon.8097ce74.svg"},c478:function(t,e,n){"use strict";n("262c")},c549:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-bar"},[n("router-link",{attrs:{to:"/"}},[n("v-icon",{attrs:{color:"#EAEAEA",size:"28"}},[t._v(" account_balance_wallet ")])],1),n("div",{staticClass:"scanLink"},[n("router-link",{attrs:{to:"/scan"}},[n("v-icon",{attrs:{color:"#EAEAEA"}},[t._v("qr_code")])],1)],1),n("router-link",{attrs:{to:"/payment"}},[n("v-img",{staticClass:"mx-auto",attrs:{src:t.pathBuyIcon,height:"28px",width:"28px",contain:""}})],1)],1)},r=[],s=(n("b0c0"),{name:"bottomNav",computed:{routeName:function(){return this.$route.name},pathBuyIcon:function(){return"Payment"==this.routeName?"/image/buyicon.png":"/image/buyiconactive.png"}},data:function(){return{}}}),o=s,i=(n("9b63"),n("2877")),c=n("6544"),u=n.n(c),l=n("132d"),d=n("adda"),m=Object(i["a"])(o,a,r,!1,null,null,null);e["a"]=m.exports;u()(m,{VIcon:l["a"],VImg:d["a"]})},ce7e:function(t,e,n){"use strict";var a=n("5530"),r=(n("8ce9"),n("7560"));e["a"]=r["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(t){var e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:Object(a["a"])({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:Object(a["a"])({role:"separator","aria-orientation":e},this.$attrs),on:this.$listeners})}})},d891:function(t,e,n){}}]);
//# sourceMappingURL=chunk-128aa79d.a7d65028.js.map